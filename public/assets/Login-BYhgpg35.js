import{c as S,r as i,u as k,j as s,A,a as I,b as L,L as p,I as g,d as v,B as x,p as M,e as F}from"./index-B5CwwndN.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=S("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=S("MessageSquareWarning",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]]);function f(e,c,o="user"){return new Promise((t,r)=>{const l={pass:c,[o==="user"?"nisn":"pegId"]:e},n=o==="user"?M:F;console.log(n),fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(d=>d.json()).then(t).catch(r)})}function T(){const[e,c]=i.useState({nisn:"",password:""}),[o,t]=i.useState(!1),[r,l]=i.useState(!1),[n,d]=i.useState(!1),u=k(),m=a=>{const{name:y,value:N}=a.currentTarget,h=e;h[y]=N,c(h)},w=async()=>{l(!0);const a=await f(e.nisn,e.password);a.status===201&&a.session?(sessionStorage.setItem("refresh-token",a.session),u("/guest/"+e.nisn,{replace:!0})):t(!0),l(!1)},b=async()=>{t(!1),d(!0),console.log(e);const a=await f(e.nisn,e.password,"admin");a.status===201&&a.session?(sessionStorage.setItem("refresh-admin",a.session),u("/dashboard",{replace:!0})):t(!0),d(!1)};return s.jsxs(i.Suspense,{fallback:"Tunggu Sebentar",children:[o??s.jsxs(A,{children:[s.jsx(z,{className:"h-4 w-4"}),s.jsx(I,{children:"ID atau Sandi Salah"}),s.jsx(L,{children:"Periksa Kembali data anda, pastikan semua benar"})]}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2 text-start",children:[s.jsx(p,{htmlFor:"email",children:"NISN/ID"}),s.jsx(g,{id:"email",name:"nisn",type:"text",placeholder:"contoh : 00234234",onInput:m,required:!0})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{htmlFor:"password",children:"Sandi"}),s.jsx(v,{to:"/forgot-password",className:"ml-auto inline-block text-sm underline",children:"Forgot your password?"})]}),s.jsx(g,{id:"password",onInput:m,name:"password",type:"password",required:!0})]}),s.jsx(x,{onClick:w,className:"w-full",disabled:r||n,children:r?s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"})," Sedang Mencoba..."]}):"Login"}),s.jsx(x,{variant:"outline",onClick:b,className:"w-full",disabled:n||r,children:n?s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"})," Sedang Mencoba..."]}):"Login dengan Admin"})]})]})}export{f as ProccessForm,T as default};
