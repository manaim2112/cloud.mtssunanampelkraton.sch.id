import{c as _,r as c,j as e,Z as R,f,a0 as U,a1 as se,a2 as ae,a3 as H,a4 as q,a5 as te,a6 as ne,a7 as re,a8 as ce,$ as ie,a9 as oe,o as de,i as F,_ as E,l as le,aa as ue,ab as me,ac as pe,u as he,ad as fe,ae as xe,S as be,N as je,C as B,x as A,y as I,M as w,z as L,E as O,B as $,af as ge,D as Ne,ag as ye,ah as $e,L as T,I as P,ai as ke,aj as we,ak as Ce}from"./index-B5CwwndN.js";import{T as ve}from"./truck-DBQA9wSA.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=_("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=_("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_e=te,Ee=ne,Me=re,J=c.forwardRef(({className:t,...s},n)=>e.jsx(R,{ref:n,className:f("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));J.displayName=R.displayName;const De=c.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(Me,{children:[e.jsx(J,{}),e.jsxs(U,{ref:a,className:f("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(se,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));De.displayName=U.displayName;const z=({className:t,...s})=>e.jsx("div",{className:f("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});z.displayName="DialogHeader";const V=({className:t,...s})=>e.jsx("div",{className:f("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});V.displayName="DialogFooter";const Be=c.forwardRef(({className:t,...s},n)=>e.jsx(H,{ref:n,className:f("text-lg font-semibold leading-none tracking-tight",t),...s}));Be.displayName=H.displayName;const G=c.forwardRef(({className:t,...s},n)=>e.jsx(q,{ref:n,className:f("text-sm text-muted-foreground",t),...s}));G.displayName=q.displayName;const Ae=t=>t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");function Ie(t,s){const n=[];return t.forEach(a=>{(["pilgan","isian_singkat","isian_panjang","menjodohkan"].includes(a.tipe)||Number(a.skor))&&n.push({CBT_list_id:Number(s),question:Ae(a.soal),tipe:a.tipe,options:JSON.stringify(a.jawaban),answer:JSON.stringify(a.kunci),score:String(a.skor)})}),new Promise(a=>{try{fetch(ce,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>i.json()).then(i=>{a(i.status===201)}).catch(i=>{a(i)})}catch{a(!1)}})}const K="Switch",[Le,Ke]=ie(K),[Oe,Re]=Le(K),Ue=c.forwardRef((t,s)=>{const{__scopeSwitch:n,name:a,checked:i,defaultChecked:m,required:l,disabled:u,value:p="on",onCheckedChange:x,...r}=t,[o,d]=c.useState(null),h=oe(s,b=>d(b)),j=c.useRef(!1),N=o?!!o.closest("form"):!0,[g=!1,C]=de({prop:i,defaultProp:m,onChange:x});return c.createElement(Oe,{scope:n,checked:g,disabled:u},c.createElement(F.button,E({type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":W(g),"data-disabled":u?"":void 0,disabled:u,value:p},r,{ref:h,onClick:le(t.onClick,b=>{C(v=>!v),N&&(j.current=b.isPropagationStopped(),j.current||b.stopPropagation())})})),N&&c.createElement(Fe,{control:o,bubbles:!j.current,name:a,value:p,checked:g,required:l,disabled:u,style:{transform:"translateX(-100%)"}}))}),He="SwitchThumb",qe=c.forwardRef((t,s)=>{const{__scopeSwitch:n,...a}=t,i=Re(He,n);return c.createElement(F.span,E({"data-state":W(i.checked),"data-disabled":i.disabled?"":void 0},a,{ref:s}))}),Fe=t=>{const{control:s,checked:n,bubbles:a=!0,...i}=t,m=c.useRef(null),l=ue(n),u=me(s);return c.useEffect(()=>{const p=m.current,x=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(x,"checked").set;if(l!==n&&o){const d=new Event("click",{bubbles:a});o.call(p,n),p.dispatchEvent(d)}},[l,n,a]),c.createElement("input",E({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:m,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function W(t){return t?"checked":"unchecked"}const X=Ue,Je=qe,Y=c.forwardRef(({className:t,...s},n)=>e.jsx(X,{className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx(Je,{className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Y.displayName=X.displayName;const ze=t=>{const{detail:s}=t,[n,a]=c.useState({id:s==null?void 0:s.id,name:s==null?void 0:s.name,durasi:s==null?void 0:s.durasi,min_durasi:s==null?void 0:s.min_durasi,jenis:s==null?void 0:s.jenis,tokelas:s==null?void 0:s.tokelas});c.useEffect(()=>{a({id:s==null?void 0:s.id,name:s==null?void 0:s.name,durasi:s==null?void 0:s.durasi,min_durasi:s==null?void 0:s.min_durasi,jenis:s==null?void 0:s.jenis,tokelas:s==null?void 0:s.tokelas})},[s]);const i=l=>{const{name:u,value:p}=l.target;a(x=>({...x,[u]:p}))},m=()=>{fetch(Ce,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,name:n.name,jenis:n.jenis,durasi:n.durasi,min_durasi:n.min_durasi,tokelas:n.tokelas})}).then(l=>l.json()).then(l=>{l.status===201?alert("Berhasil Melakukan Perubahan"):alert("Gagal melakukan Perubahan")})};return e.jsxs(_e,{modal:!0,children:[e.jsx(Ee,{asChild:!0,children:e.jsx($,{variant:"outline",children:"PERUBAHAN"})}),e.jsxs(ye,{className:"sm:max-w-md",children:[e.jsxs(z,{children:[e.jsx($e,{children:"Perubah Ujian"}),e.jsx(G,{children:"Anda Dapat merubah pengaturan ujian disini, jika sudah selesai melakukan perubahan, klik tombol selesai."})]}),e.jsx("div",{className:"space-x-2 text-start mt-3",children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(T,{htmlFor:"name",children:"Nama Ujian"}),e.jsx(P,{id:"name",name:"name",onInput:i,type:"text",placeholder:"Nama ujian",defaultValue:s==null?void 0:s.name,required:!0})]})}),e.jsx("div",{className:"space-x-2 text-start mt-3",children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(T,{htmlFor:"name",children:"Masa Pengerjaan"}),e.jsx(P,{id:"name",name:"durasi",onInput:i,type:"text",placeholder:"Nama ujian",defaultValue:s==null?void 0:s.durasi,required:!0})]})}),e.jsx("div",{className:"space-x-2 text-start mt-3",children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(T,{htmlFor:"name",children:"Min Masa Pengerjaan"}),e.jsx(P,{id:"name",name:"min_durasi",onInput:i,type:"text",placeholder:"Nama ujian",defaultValue:s==null?void 0:s.min_durasi,required:!0})]})}),e.jsx(V,{className:"sm:justify-start mt-4",children:e.jsx($,{onClick:m,type:"button",children:"SIMPAN"})})]})]})};function We(){const{id:t}=pe(),[s,n]=c.useState(),[a,i]=c.useState({id:0,acak:!0,name:"",berakhir:"",code:"",created_at:"",creator:0,durasi:"",jenis:"",min_durasi:"",mulai:"",priority:!0,tokelas:"",updated_at:""}),[m]=c.useState("ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")),l=he(),u=()=>{l("/dashboard/cbt/id/"+t+"/lacak")};c.useEffect(()=>{fetch(fe(Number(t))).then(r=>r.json()).then(r=>{if(r.status===200){const o=[];r.data.forEach(d=>{o.push({id:d.id,soal:d.question,tipe:d.tipe,jawaban:JSON.parse(d.options),kunci:JSON.parse(d.answer),skor:Number(d.score)})}),n(o)}}),fetch(xe(Number(t))).then(r=>r.json()).then(r=>{r.status===200&&i(r.data)})},[t]);const p=()=>{const r=document.createElement("input");r.type="file",r.addEventListener("change",o=>{var N;const d=o.target,h=(N=d==null?void 0:d.files)==null?void 0:N[0];if(!h)return;r.remove();const j=new FileReader;j.onload=g=>{var b;const C=(b=g.target)==null?void 0:b.result;mammothPlus.convertToHtml({arrayBuffer:C}).then(({value:v})=>{const M=document.createElement("div");M.innerHTML=v;const Z=M.querySelectorAll("table > tbody > tr:not(td table tr)"),k=[];Z.forEach(S=>{const y=S.querySelectorAll("td"),D=[];y[3].querySelectorAll("li").forEach(ee=>{D.push(ee.innerHTML)});const Q={id:1,soal:y[1].innerHTML,tipe:y[2].innerText.toLowerCase(),jawaban:D,kunci:y[4].innerText.split("|"),skor:Number(y[5].innerText)};k.push(Q)}),k.shift(),t&&(n([]),Ie(k,t).then(S=>{S&&(n(k),alert("BERHASIL DI UPLOAD"))}))}).then(MathJax.typeset)},j.readAsArrayBuffer(h)}),document.body.appendChild(r),r.click()},x=r=>{fetch(ke,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a==null?void 0:a.id,priority:r})}).then(o=>o.json()).then(o=>{if(console.log(o),o.status===201){const d={...a};d.priority=r,i(d),we.fire({title:"Berhasil",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,position:"top-right"})}})};return e.jsxs("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[e.jsx(be,{}),e.jsxs("div",{className:"flex flex-col sm:gap-4 sm:py-4 sm:pl-14",children:[e.jsx(je,{}),e.jsxs("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 lg:grid-cols-3 xl:grid-cols-3",children:[e.jsx("div",{className:"grid order-2 lg:order-1 Cgrid-cols-1 lg:grid-cols-2 items-start gap-4 md:gap-8 lg:col-span-2",children:s==null?void 0:s.map((r,o)=>e.jsxs(B,{className:"w-full text-start",children:[e.jsxs(A,{children:[e.jsxs(I,{children:[o+1," ",e.jsxs(w,{variant:"secondary",children:[e.jsx(Pe,{className:"w-4 h-4"})," ",r.skor]})]}),e.jsx(L,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r.soal}})})]}),e.jsx(O,{children:r.tipe=="pilgan"&&e.jsx(e.Fragment,{children:r.jawaban.map((d,h)=>e.jsx(w,{className:"mx-2",variant:r.kunci.includes(m[h])?"default":"outline",dangerouslySetInnerHTML:{__html:m[h]+" "+d}},h))})})]},o))}),e.jsx("div",{className:"order-1 lg:order-2",children:e.jsxs(B,{className:"overflow-hidden","x-chunk":"dashboard-05-chunk-4",children:[e.jsxs(A,{className:"flex flex-row items-start bg-muted/50",children:[e.jsxs("div",{className:"grid gap-0.5",children:[e.jsxs(I,{className:"group flex items-center gap-2 text-lg",children:[a==null?void 0:a.name,e.jsxs($,{size:"icon",variant:"outline",className:"h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100",children:[e.jsx(Te,{className:"h-3 w-3"}),e.jsx("span",{className:"sr-only",children:"Copy Order ID"})]})]}),e.jsx(L,{children:a==null?void 0:a.jenis})]}),e.jsxs("div",{className:"ml-auto flex flex-col items-end gap-1",children:[e.jsxs($,{onClick:u,size:"sm",variant:"outline",className:"h-8 gap-1",children:[e.jsx(ve,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"lg:sr-only xl:not-sr-only xl:whitespace-nowrap",children:"Lacak Pengerjaan"})]}),e.jsxs($,{onClick:p,size:"sm",variant:"outline",className:"h-8 gap-1",children:[e.jsx(Se,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"lg:sr-only xl:not-sr-only xl:whitespace-nowrap",children:"Upload"})]})]})]}),e.jsx(O,{className:"p-6 text-sm",children:e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{className:"font-semibold",children:"UJIAN DETAIL"}),e.jsxs("ul",{className:"grid gap-3",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Mata Pelajaran ",e.jsx("span",{children:"2"})]}),e.jsx("span",{children:a==null?void 0:a.name})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Jenis Ujian ",e.jsx("span",{children:"1"})]}),e.jsx("span",{children:a==null?void 0:a.jenis})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Masa Pengerjaan ",e.jsx("span",{children:"1"})]}),e.jsxs("span",{children:[a==null?void 0:a.durasi," menit"]})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Minimal Masa Pengerjaan ",e.jsx("span",{children:"1"})]}),e.jsxs("span",{children:[a==null?void 0:a.min_durasi," menit"]})]})]}),e.jsx(ze,{detail:a}),e.jsx(ge,{className:"my-2"}),e.jsxs("ul",{className:"grid gap-3",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Mulai"}),e.jsx("span",{children:a!=null&&a.mulai?a.mulai:e.jsx(w,{variant:"outline",children:"Belum di set"})})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Berakhir"}),e.jsx("span",{children:a!=null&&a.berakhir?a.berakhir:e.jsx(w,{variant:"outline",children:"Belum di set"})})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"FORMAT ACAK"}),e.jsx("span",{children:a!=null&&a.acak?"YA":"TIDAK"})]}),e.jsxs("li",{className:"flex items-center justify-between font-semibold",children:[e.jsx("span",{className:"text-muted-foreground",children:"KODE UJIAN"}),e.jsx("span",{className:"text-3xl",children:a==null?void 0:a.code})]})]})]})}),e.jsxs(Ne,{className:"flex flex-row items-center border-t bg-muted/50 px-6 py-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Updated"," ",e.jsx("time",{dateTime:"2023-11-23",children:a!=null&&a.updated_at?atob(a.updated_at):"NOT BE SET"})]}),e.jsx("div",{className:"ml-auto mr-0 w-auto",children:e.jsx(Y,{checked:(a==null?void 0:a.priority)!==null?a.priority:!1,onCheckedChange:x})})]})]})})]})]})]})}export{We as default};
